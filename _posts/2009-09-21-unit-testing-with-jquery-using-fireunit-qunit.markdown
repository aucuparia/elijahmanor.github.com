---
layout: post
title: Unit Testing with jQuery using FireUnit &amp; QUnit
date: '2009-09-21 12:53:00'
---

<p>Today’s screencast is the 5th in a series of developer Firefox Extensions. You can view my previous 3 short <a href="http://screenr.com/user/elijahmanor">Screenr</a> screencasts here… </p>  <ul><li><a href="http://elijahmanor.com/webdevdotnet/post/Firefinder-Add-on-for-Firebug-Add-on-for-Firefox.aspx">Firefinder for Firebug for Firefox for Fiddling with jQuery</a> </li>    <li><a href="http://elijahmanor.com/webdevdotnet/post/Digging-Into-The-FireQuery-Add-on-for-jQuery.aspx">Digging Into The FireQuery Add-on for jQuery</a> </li>    <li><a href="http://elijahmanor.com/webdevdotnet/post/Google-Page-Speed-Yahoo-YSlow-Firebug-Extensions-to-Increase-Web-Page-Performance.aspx">Page Speed & YSlow Firebug Extensions to Increase Web Page Performance</a> </li>    <li><a href="http://www.elijahmanor.com/webdevdotnet/post/ASPNET-AJAX-Add-ons-%28FireAtlas-FireCookie%29-for-Firefoxs-Firebug.aspx">ASP.NET AJAX Add-ons (FireAtlas & FireCookie) for Firefox's Firebug</a> </li> </ul><ul>In addition to this post being part in a series of Firefox Extension screencasts, it is actually also the 3rd part of an old series looking through various JavaScript Unit Testing frameworks…</ul><ul><li><a href="http://elijahmanor.com/webdevdotnet/post/JavaScript-Unit-Testing-Frameworks.aspx">JavaScript Unit Testing Frameworks</a> </li>    <li><a href="http://elijahmanor.com/webdevdotnet/post/JavaScript-Unit-Testing-Part-1-JsUnit.aspx">JavaScript Unit Testing Part 1: JsUnit</a> </li>    <li><a href="http://elijahmanor.com/webdevdotnet/post/JavaScript-Unit-Testing-Part-2-JSSpec.aspx">JavaScript Unit Testing Part 2: JSSpec</a> </li> </ul><ul>The following short screencast will give a quick review of the FireUnit Firefox Firebug Add-on and also the QUnit Unit Testing framework for jQuery. In case you don’t want to watch the 4 minute screencast I thought I would go ahead and flush out the rest of this blog post with code, screenshots, and commentary.</ul>  <ul></ul><ul>As a review, to exercise our Unit Testing frameworks we have been using a simple Pig Latin function as our testing subject. </ul><blockquote>   <p>This code is not optimal and it will be refactored in a future post. So, please focus on the Unit Testing and not the actual Pig Latin function :)</p> </blockquote>  <p>So, here is the Pig Latin converter function we will be using for our tests…</p>  <pre>function EnglishToPigLatin() {<br>    this.CONSONANTS = 'bcdfghjklmnpqrstvwxyz';<br>    this.VOWELS = 'aeiou';<br>    this.Translate = function(english, splitType) {<br>        var translated = '';    <br><br>        var words = english.split(/\s+/);<br>        for (var i = 0; i < words.length; ++i) {<br>            translated += this.TranslateWord(words[i]);<br>            if (i+1 < words.length) translated += ' ';<br>        }<br><br>        return translated;<br>    }<br>    this.TranslateWord = function(english) {<br>       /*const*/ var SYLLABLE = 'ay';<br><br>       var pigLatin = '';<br><br>       if (english != null && english.length > 0 && <br>          (this.VOWELS.indexOf(english[0].toLowerCase()) > -1 || this.CONSONANTS.indexOf(english[0].toLowerCase()) > -1 )) {<br>          if (this.VOWELS.indexOf(english[0].toLowerCase()) > -1) {<br>             pigLatin = english + SYLLABLE;<br>          } else {      <br>             var preConsonants = '';<br>             for (var i = 0; i < english.length; ++i) {<br>                if (this.CONSONANTS.indexOf(english[i].toLowerCase()) > -1) {<br>                   preConsonants += english[i];<br>                   if (preConsonants.toLowerCase() == 'q' && i+1 < english.length && english[i+1].toLowerCase() == 'u') {<br>                      preConsonants += 'u';<br>                      i += 2;<br>                      break;<br>                   }<br>                } else {<br>                   break;<br>                }<br>             }<br>             pigLatin = english.substring(i) + preConsonants + SYLLABLE;<br>          }<br>       }<br><br>       return pigLatin;    <br>    }<br>} </pre> <p>First we are going to write a simple set of 20 <a href="http://fireunit.org/" target="_blank">FireUnit</a> tests that can be ran inside <a href="http://www.mozilla.com/en-US/firefox/firefox.html" target="_blank">Firefox</a>’s <a href="https://addons.mozilla.org/en-US/firefox/addon/1843" target="_blank">Firebug</a> using the <a href="http://fireunit.org/" target="_blank">FireUnit</a> Add-on.</p> <pre><html xmlns="http://www.w3.org/1999/xhtml"><br><head><br>    <script type="text/javascript" src="PigLatinBad.js"></script><br>    <script type="text/javascript"><br>        var englishToPigLatin = new EnglishToPigLatin();<br><br>        //Invalid Arguments<br>        fireunit.compare(englishToPigLatin.TranslateWord(null), '', 'Passing Null Should Return Blank');<br>        fireunit.compare(englishToPigLatin.TranslateWord(''), '', 'Passing Blank Should Return Blank');<br>        fireunit.compare(englishToPigLatin.TranslateWord('1234567890'), '', 'Passing 1234567890 Should Return Blank');<br>        fireunit.compare(englishToPigLatin.TranslateWord('~!@#$%^&*()_+'), '', 'Passing ~!@#$%^&*()_+ Should Return Blank');<br><br>        //Consonant Words<br>        fireunit.compare(englishToPigLatin.TranslateWord('beast'), 'eastbay', 'Passing Beast Should Return Eastbay');<br>        fireunit.compare(englishToPigLatin.TranslateWord('dough'), 'oughday', 'Passing Dough Should Return Oughday');<br>        fireunit.compare(englishToPigLatin.TranslateWord('happy'), 'appyhay', 'Passing happy Should Return appyhay');<br>        fireunit.compare(englishToPigLatin.TranslateWord('question'), 'estionquay', 'Passing question Should Return estionquay');<br>        fireunit.compare(englishToPigLatin.TranslateWord('star'), 'arstay', 'Passing star Should Return arstay');<br>        fireunit.compare(englishToPigLatin.TranslateWord('three'), 'eethray', 'Passing three Should Return eethray');<br><br>        //Vowel Words<br>        fireunit.compare(englishToPigLatin.TranslateWord('apple'), 'appleay', 'apple Should Return appleay');<br>        fireunit.compare(englishToPigLatin.TranslateWord('elijah'), 'elijahay', 'elijah Should Return elijahay');<br>        fireunit.compare(englishToPigLatin.TranslateWord('igloo'), 'iglooay', 'igloo Should Return iglooay');<br>        fireunit.compare(englishToPigLatin.TranslateWord('octopus'), 'octopusay', 'octopus Should Return octopusay');<br>        fireunit.compare(englishToPigLatin.TranslateWord('umbrella'), 'umbrellaay', 'umbrella Should Return umbrellaay');<br><br>        //Sentences<br>        fireunit.compare(englishToPigLatin.Translate('hello'), 'ellohay', "Passing 'hello' Should Return 'elloh'");<br>        fireunit.compare(englishToPigLatin.Translate('hello world'), 'ellohay orldway', "Passing 'hello world' Should Return 'elloh orldw'");<br>        fireunit.compare(englishToPigLatin.Translate('hello world!'), 'ellohay orld!way', "Passing 'hello world!' Should Return 'ellow orld!w'");<br>        fireunit.compare(englishToPigLatin.Translate('Hello World'), 'elloHay orldWay', "Passing 'Hello World' Should Return 'elloH orldW'");<br>        fireunit.compare(englishToPigLatin.Translate('Hello World!'), 'elloHay orld!Way', "Passing 'Hello World!' Should Return 'elloH orld!W'");<br><br>        // Wait for asynchronous operation.<br>        setTimeout(function() {<br>            // Finish test<br>            fireunit.testDone();<br>        }, 1000);<br>    </script><br></head><br><body /><br></html></pre> <p>If we run the webpage inside of Firefox, we don’t see anything from the browser window, but if we open Firebug and click the “Tests” tab, then we can see the output of the 20 tests.</p> <p><a href="http://elijahmanor.com/webdevdotnet/image.axd?picture=FireUnit.png"><img title="FireUnit" border="0" alt="FireUnit" src="http://elijahmanor.com/webdevdotnet/image.axd?picture=FireUnit_thumb.png" width="604" height="342"></a> </p> <p>One of the other nice features of FireUnit is that its compare assertion will actually show the difference of the two values instead of just saying they are the same or not. Here is an example of the output from a failing compare…</p> <p><a href="http://elijahmanor.com/webdevdotnet/image.axd?picture=FireUnitCompare.png"><img title="FireUnitCompare" border="0" alt="FireUnitCompare" src="http://elijahmanor.com/webdevdotnet/image.axd?picture=FireUnitCompare_thumb.png" width="604" height="342"></a> </p> <p>The output is pretty impressive, but what if you already have a lot of existing <a href="http://docs.jquery.com/QUnit" target="_blank">QUnit</a> Unit Tests or what if you would also like to have some sort of User Interface to your test page. Well, the nice thing about FireUnit is that you can integrate it into <a href="http://docs.jquery.com/QUnit" target="_blank">QUnit</a>! By adding several lines of code we can have the output of our <a href="http://docs.jquery.com/QUnit" target="_blank">QUnit</a> tests render to the FireUnit Add-on as well!</p> <p>The following is a set of <a href="http://docs.jquery.com/QUnit" target="_blank">QUnit</a> Unit Tests with 4 lines of code near the end that registers the output with FireUnit as well.</p> <pre><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd"><br><html xmlns="http://www.w3.org/1999/xhtml" xml:lang="ko"><br><head><br>    <meta http-equiv="Content-Type" content="text/html;charset=UTF-8" /><br>    <title>English To Pig Latin QUnit Tests</title><br>    <link rel="stylesheet" href="http://jqueryjs.googlecode.com/svn/trunk/qunit/testsuite.css" type="text/css" media="screen" /><br>    <script type="text/javascript" src="http://code.jquery.com/jquery-latest.js"></script><br>    <script type="text/javascript" src="http://jqueryjs.googlecode.com/svn/trunk/qunit/testrunner.js"></script><br>    <script type="text/javascript" src="PigLatinBad.js"></script><br>    <script type="text/javascript"><br>        $(document).ready(function() {<br><br>            module("Pig Latin");<br><br>            var englishToPigLatin = new EnglishToPigLatin();<br><br>            test('Invalid Arguments', function() {<br>                equals(englishToPigLatin.TranslateWord(null), '', 'Passing Null Should Return Blank');<br>                equals(englishToPigLatin.TranslateWord(''), '', 'Passing Blank Should Return Blank');<br>                equals(englishToPigLatin.TranslateWord('1234567890'), '', 'Passing 1234567890 Should Return Blank');<br>                equals(englishToPigLatin.TranslateWord('~!@#$%^&*()_+'), '', 'Passing ~!@#$%^&*()_+ Should Return Blank');<br>            });<br><br>            test('Consonant Words', function() {<br>                equals(englishToPigLatin.TranslateWord('beast'), 'eastbay', 'Passing Beast Should Return Eastbay');<br>                equals(englishToPigLatin.TranslateWord('dough'), 'oughday', 'Passing Dough Should Return Oughday');<br>                equals(englishToPigLatin.TranslateWord('happy'), 'appyhay', 'Passing happy Should Return appyhay');<br>                equals(englishToPigLatin.TranslateWord('question'), 'estionquay', 'Passing question Should Return estionquay');<br>                equals(englishToPigLatin.TranslateWord('star'), 'arstay', 'Passing star Should Return arstay');<br>                equals(englishToPigLatin.TranslateWord('three'), 'eethray', 'Passing three Should Return eethray');<br>            });<br><br>            test('Vowel Words', function() {<br>                equals(englishToPigLatin.TranslateWord('apple'), 'appleay', 'apple Should Return appleay');<br>                equals(englishToPigLatin.TranslateWord('elijah'), 'elijahay', 'elijah Should Return elijahay');<br>                equals(englishToPigLatin.TranslateWord('igloo'), 'iglooay', 'igloo Should Return iglooay');<br>                equals(englishToPigLatin.TranslateWord('octopus'), 'octopusay', 'octopus Should Return octopusay');<br>                equals(englishToPigLatin.TranslateWord('umbrella'), 'umbrellaay', 'umbrella Should Return umbrellaay');<br>            });<br><br>            test('Sentences', function() {<br>                equals(englishToPigLatin.Translate('hello'), 'ellohay', "Passing 'hello' Should Return 'elloh'");<br>                equals(englishToPigLatin.Translate('hello world'), 'ellohay orldway', "Passing 'hello world' Should Return 'elloh orldw'");<br>                equals(englishToPigLatin.Translate('hello world!'), 'ellohay orld!way', "Passing 'hello world!' Should Return 'ellow orld!w'");<br>                equals(englishToPigLatin.Translate('Hello World'), 'elloHay orldWay', "Passing 'Hello World' Should Return 'elloH orldW'");<br>                equals(englishToPigLatin.Translate('Hello World!'), 'elloHay orld!Way', "Passing 'Hello World!' Should Return 'elloH orld!W'");<br>            });<br><br>            if (typeof fireunit === "object") {<br>                QUnit.log = fireunit.ok;<br>                QUnit.done = fireunit.testDone;<br>            }<br><br>        });<br>    </script><br></head><br><body><br>    <h1>English To Pig Latin QUnit Tests</h1><br>    <h2 id="banner"></h2><br>    <h2 id="userAgent"></h2><br>    <ol id="tests"></ol><br>    <div id="main"></div><br></body><br></html><br><br><a href="http://elijahmanor.com/webdevdotnet/image.axd?picture=QUnitWithFireUnit.png"><img title="QUnitWithFireUnit" border="0" alt="QUnitWithFireUnit" src="http://elijahmanor.com/webdevdotnet/image.axd?picture=QUnitWithFireUnit_thumb.png" width="604" height="342"></a> </pre> <p>Now, not only do we have a User Interface on the webpage, but we also have the tests running in Firebug. </p> <p>For more information about FireUnit you can check out a <a href="http://ejohn.org/blog/fireunit/" target="_blank">post by Jonn Resig</a> and it’s <a href="http://wiki.github.com/jeresig/fireunit" target="_blank">Wiki on GitHub</a>. And if you are interested in QUnit, there is a nice <a href="http://docs.jquery.com/QUnit" target="_blank">overview</a> on the jQuery webiste.</p>